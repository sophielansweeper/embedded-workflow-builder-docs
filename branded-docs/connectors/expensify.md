---
title: Expensify Connector
sidebar_label: Expensify
description: Expensify provides an industry leading expense management system. Use the Expensify component to programmatically download expense report data for analysis or insertion into your accounting package, provision accounts for new hires, and much more.
---

![Expensify](./assets/expensify.png#connector-icon)
Expensify provides an industry leading expense management system. Use the Expensify component to programmatically download expense report data for analysis or insertion into your accounting package, provision accounts for new hires, and much more.

## Connections

### Basic Connection

Basic connection for Expensify

| Input               | Comments                                                                    | Default |
| ------------------- | --------------------------------------------------------------------------- | ------- |
| Partner User ID     | Provide a string value for the partnerUserID of your Expensify account.     |         |
| Partner User Secret | Provide a string value for the partnerUserSecret of your Expensify account. |         |

## Actions

### Create Expense

Allows you to create expenses in a user’s account.

| Input            | Comments                                             | Default                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ---------------- | ---------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Connection       |                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Type             | Specifies to the job that it has to create expenses. | expenses                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Employee Email   | The report will be created in that account.          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Transaction List | The transactions to add to the report.               | <code>[<br /> {<br /> "created": "2016-01-01",<br /> "currency": "USD",<br /> "merchant": "Name of merchant 1",<br /> "amount": 1234<br /> },<br /> {<br /> "created": "2016-01-21",<br /> "currency": "EUR",<br /> "merchant": "Name of merchant 2",<br /> "amount": 2211,<br /> "policyID": "E40D9B8DF456E233",<br /> "tax": {<br /> "rateID": "id_TAX_OPTION_16"<br /> }<br /> },<br /> {<br /> "created": "2016-01-31",<br /> "currency": "CAD",<br /> "merchant": "Name of merchant 3",<br /> "amount": 2211,<br /> "reportID": "R006AseGxMka",<br /> "tax": {<br /> "rateID": "id_TAX_OPTION_16",<br /> "amount": 600<br /> }<br /> }<br />]</code> |

### Create Expense Rule

Create expense rules for a given employee on a given policy.

| Input          | Comments                                                    | Default                                                                      |
| -------------- | ----------------------------------------------------------- | ---------------------------------------------------------------------------- |
| Connection     |                                                             |                                                                              |
| Type           | Specifies to the job that it has to create an expense rule. | expenseRules                                                                 |
| Employee Email | The report will be created in that account.                 |                                                                              |
| Policy ID      | The report will be created in that policy.                  |                                                                              |
| Actions        | The actions to perform on the expense rule.                 | <code>{<br /> "tag": "Tag Name",<br /> "defaultBillable": true<br />}</code> |

### Create Policy

Creates a policy.

| Input       | Comments                                                                                                | Default |
| ----------- | ------------------------------------------------------------------------------------------------------- | ------- |
| Connection  |                                                                                                         |         |
| Type        | Specifies to the job that it has to create a policy.                                                    | policy  |
| Policy Name | The name of the policy to create.                                                                       |         |
| Plan        | Specifies the plan of the policy. If not specified, the new policy will be created under the team plan. |         |

### Create Report

Creates a report, with transactions, in a user’s account.

| Input          | Comments                                             | Default                                                                                                                                                                                                                                                                                |
| -------------- | ---------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Connection     |                                                      |                                                                                                                                                                                                                                                                                        |
| Type           | Specifies to the job that it has to create a report. | report                                                                                                                                                                                                                                                                                 |
| Employee Email | The report will be created in that account.          |                                                                                                                                                                                                                                                                                        |
| Report         | The report to create.                                | <code>{<br /> "title": "Name of the report",<br /> "fields": {<br /> "reason_of_trip": "Business trip",<br /> "employees": "3"<br /> }<br />}</code>                                                                                                                                   |
| Expenses       | The expenses to add to the report.                   | <code>[<br /> {<br /> "date": "yyyy-mm-dd",<br /> "currency": "USD",<br /> "merchant": "Name of merchant",<br /> "amount": 1234<br /> },<br /> {<br /> "date": "yyyy-mm-dd",<br /> "currency": "CAD",<br /> "merchant": "Name of merchant",<br /> "amount": 2211<br /> }<br />]</code> |
| Policy ID      | The report will be created in that policy.           |                                                                                                                                                                                                                                                                                        |

### Download Report

This job lets you download reports that were generated with the Report Exporter job.

| Input       | Comments                                            | Default           |
| ----------- | --------------------------------------------------- | ----------------- |
| Connection  |                                                     |                   |
| File Name   | The name of a file generated from the exporter job. |                   |
| File System | The name of a file generated from the exporter job. | integrationServer |

### Export Report

Export expense or report data in a configurable format for analysis or insertion into your accounting package.

| Input                          | Comments                                                                                                                                                                                | Default                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Connection                     |                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Start Date                     | Filters out all reports submitted or created before the given date, whichever occurred last (inclusive). yyyy-mm-dd formatted date.                                                     | 2016-01-01                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| End Date                       | Filters out all reports submitted or created before the given date, whichever occurred last (inclusive). yyyy-mm-dd formatted date.                                                     | 2016-01-01                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Approved After                 |                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Mark as Exported Label Filter  |                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Policy ID List                 | The IDs of the policies to get information for.                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Report ID List                 | The IDs of the reports to get information for.                                                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| File Extension                 | Specifies the format of the generated report. Note: if the 'pdf' option is chosen, one PDF file will be generated for each report exported.                                             | json                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| File Basename                  | The name of the generated file(s) will start with this value, and a random part will be added to make each filename globally unique. If not specified, the default value export is use. |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Include Full Page Receipts PDF | Specifies whether generated PDFs should include full page receipts. This parameter is used only if fileExtension contains pdf                                                           | false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Report State                   | The status to change the reports to. At the moment, only Reimbursed is supported. Only reports in the Approved status can be updated to Reimbursed. All other reports will be ignored.  | REIMBURSED                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Limit                          | Maximum number of reports to export.                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Employee Email                 | The report will be created in that account.                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| On Finish                      | You can configure the recipients list of email addresses that should receive a summary email of the changes made by the API.                                                            | <code>[<br /> {<br /> "actionName": "markAsExported",<br /> "label": "Expensify Export"<br /> },<br /> {<br /> "actionName": "email",<br /> "recipients": "manager@domain.com,finances@domain.com",<br /> "message": "Report is ready."<br /> }<br />]</code>                                                                                                                                                                                                                                                                                                                                                                  |
| Test                           | If set to true, actions defined in onFinish will not be executed.                                                                                                                       | false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Template                       | The template parameter is used to format the Expensify data as you wish. It is based on the Freemarker language's syntax.                                                               | <br /> <#if addHeader == true><br /> Merchant,Original Amount,Category,Report number,Expense number<#lt><br /> </#if><br /> <#assign reportNumber = 1><br /> <#assign expenseNumber = 1><br /> <#list reports as report><br /> <#list report.transactionList as expense><br /> ${expense.merchant},<#t><br /> <#-- note: expense.amount prints the original amount only --><br /> ${expense.amount},<#t><br /> ${expense.category},<#t><br /> ${reportNumber},<#t><br /> ${expenseNumber}<#lt><br /> <#assign expenseNumber = expenseNumber + 1><br /> </#list><br /> <#assign reportNumber = reportNumber + 1><br /> </#list> |

### Get Policy

Gets specific information about listed policies.

| Input          | Comments                                                                                                                                | Default |
| -------------- | --------------------------------------------------------------------------------------------------------------------------------------- | ------- |
| Connection     |                                                                                                                                         |         |
| Type           | Specifies to the job that it has to get information specific to policies.                                                               | policy  |
| Policy ID List | The IDs of the policies to get information for.                                                                                         |         |
| Fields         | Specifies the fields of the policy to gather information for.                                                                           |         |
| User Email     | Specifies the user to gather the policy list for. You must have been granted third-party access by that user/company domain beforehand. |         |

### List Cards

Gets the list of credit cards that are assigned at the domain level.

| Input      | Comments                                                        | Default        |
| ---------- | --------------------------------------------------------------- | -------------- |
| Connection |                                                                 |                |
| Type       | Specifies to the job that it has to list the cards of a domain. | domainCardList |
| Domain     | The name of the domain to get the cards for.                    |                |

### List Policies

Gets a list of policies with some relevant information about them.

| Input      | Comments                                                                                                                                | Default    |
| ---------- | --------------------------------------------------------------------------------------------------------------------------------------- | ---------- |
| Connection |                                                                                                                                         |            |
| Type       | Specifies to the job that it has to get a policy summary list.                                                                          | policyList |
| Admin Only | Whether or not to only get policies for which the user is an admin for.                                                                 | false      |
| User Email | Specifies the user to gather the policy list for. You must have been granted third-party access by that user/company domain beforehand. |            |

### Raw Request

Send a raw HTTP request to the Expensify API

| Input                   | Comments                                                                                                                                                                                         | Default |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------- |
| Connection              |                                                                                                                                                                                                  |         |
| URL                     | This input is not required as the Expensify API is a single endpoint.                                                                                                                            |         |
| Method                  | The HTTP method to use.                                                                                                                                                                          |         |
| Data                    | The HTTP body payload to send to the URL.                                                                                                                                                        |         |
| Form Data               | The Form Data to be sent as a multipart form upload.                                                                                                                                             |         |
| File Data               | File Data to be sent as a multipart form upload.                                                                                                                                                 |         |
| File Data File Names    | File names to apply to the file data inputs. Keys must match the file data keys above.                                                                                                           |         |
| Query Parameter         | A list of query parameters to send with the request. This is the portion at the end of the URL similar to ?key1=value1&key2=value2.                                                              |         |
| Header                  | A list of headers to send with the request.                                                                                                                                                      |         |
| Response Type           | The type of data you expect in the response. You can request json, text, or binary data.                                                                                                         | json    |
| Timeout                 | The maximum time that a client will await a response to its request                                                                                                                              |         |
| Debug Request           | Enabling this flag will log out the current request.                                                                                                                                             | false   |
| Retry Delay (ms)        | The delay in milliseconds between retries. This is used when 'Use Exponential Backoff' is disabled.                                                                                              | 0       |
| Retry On All Errors     | If true, retries on all erroneous responses regardless of type. This is helpful when retrying after HTTP 429 or other 3xx or 4xx errors. Otherwise, only retries on HTTP 5xx and network errors. | false   |
| Max Retry Count         | The maximum number of retries to attempt. Specify 0 for no retries.                                                                                                                              | 0       |
| Use Exponential Backoff | Specifies whether to use a pre-defined exponential backoff strategy for retries. When enabled, 'Retry Delay (ms)' is ignored.                                                                    | false   |

### Update Employee

Add, update or remove policy members

| Input                       | Comments                                                                                                                                                                            | Default                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| --------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Connection                  |                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Type                        | Specifies to the job that it has to update an employee                                                                                                                              | employees                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Employees                   | Replace or update the existing employees of the policy with the ones provided. If the employee does not exist, it will be created.                                                  | <code>[<br /> {<br /> "employeeEmail": "employee@domain.com",<br /> "managerEmail": "manager@domain.com",<br /> "policyID": "0123456789ABCDEF",<br /> "employeeID": "12345",<br /> "firstName": "John",<br /> "lastName": "Doe",<br /> "customField2": "ABC123",<br /> "approvalLimit": 12300,<br /> "overLimitApprover": "audit@domain.com",<br /> "isTerminated": false,<br /> "additionalPolicyIDs": [<br /> "ABCDEF0123456789",<br /> "456789ABCDEF0123"<br /> ]<br /> },<br /> {<br /> "employeeEmail": "manager@domain.com",<br /> "managerEmail": "ceo@domain.com",<br /> "policyID": "0123456789ABCDEF",<br /> "employeeID": "34567",<br /> "firstName": "Michael",<br /> "lastName": "Scott",<br /> "customField1": "ZZZ333",<br /> "customField2": "BCD345",<br /> "isTerminated": false<br /> }<br />]</code> |
| Dry Run                     | If set to true, employees will not actually be provisioned or updated. Use this for development.                                                                                    | false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| On Finish                   | You can configure the recipients list of email addresses that should receive a summary email of the changes made by the API.                                                        | <code>[<br /> {<br /> "actionName": "email",<br /> "recipients": "admin1@domain.com,admin2@domain.com"<br /> }<br />]</code>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Set Employee Primary Policy | Specifies the policy to set as the primary policy for the employee. If not specified, the employee will not have a primary policy.                                                  | none                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Admin Only                  | Dictates whether Expensify will automatically invite managers (submitsTo), managers’ managers, and so on to policies where they approve reports, if it is not their primary policy. | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

### Update Expense Rules

Update a preexisting expense rule for a given employee on a given policy.

| Input          | Comments                                                    | Default                                                                      |
| -------------- | ----------------------------------------------------------- | ---------------------------------------------------------------------------- |
| Connection     |                                                             |                                                                              |
| Type           | Specifies to the job that it has to create an expense rule. | expenseRules                                                                 |
| Employee Email | The report will be created in that account.                 |                                                                              |
| Policy ID      | The report will be created in that policy.                  |                                                                              |
| Rule ID        | The rule to update.                                         |                                                                              |
| Actions        | The actions to perform on the expense rule.                 | <code>{<br /> "tag": "Tag Name",<br /> "defaultBillable": true<br />}</code> |

### Update Policy

manage categories, tags and report fields on a policy.

| Input          | Comments                                                                           | Default                                                                                                                                                                                                                                                                                                                                                                                    |
| -------------- | ---------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Connection     |                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                            |
| Type           | Specifies to the job that it has to update a policy.                               | policy                                                                                                                                                                                                                                                                                                                                                                                     |
| Policy ID      | The report will be created in that policy.                                         |                                                                                                                                                                                                                                                                                                                                                                                            |
| Policy ID List | The IDs of the policies to get information for.                                    |                                                                                                                                                                                                                                                                                                                                                                                            |
| Categories     | Replace or update the existing categories of the policy with the ones provided.    | <code>{<br /> "action": "merge",<br /> "data": [<br /> {<br /> "name": "Category 1",<br /> "enabled": true,<br /> "payrollCode": "Payroll Code 1",<br /> "glCode": "GL Code 1",<br /> "commentHint": "Comment hint 1",<br /> "areCommentsRequired": true,<br /> "maxExpenseAmount": 2500<br /> },<br /> {<br /> "name": "Category 2",<br /> "enabled": false<br /> }<br /> ]<br />}</code> |
| Tags           | Replace the existing tags of the policy with the ones provided.                    | <code>{<br /> "data": [<br /> {<br /> "name": "Tag",<br /> "tags": [<br /> {<br /> "name": "Tag 1",<br /> "glCode": "Tag 1 GL Code"<br /> },<br /> {<br /> "name": "Tag 2",<br /> "enabled": false<br /> }<br /> ]<br /> }<br /> ]<br />}</code>                                                                                                                                           |
| Report Fields  | Replace or update the existing report fields of the policy with the ones provided. | <code>{<br /> "action": "merge",<br /> "data": [<br /> {<br /> "name": "Report field 1",<br /> "type": "dropdown",<br /> "values": [<br /> "value 1",<br /> "value 2",<br /> "value 3"<br /> ]<br /> }<br /> ]<br />}</code>                                                                                                                                                               |

### Update Report Status

Update the status of a report.

| Input      | Comments                                                                                                                                                                               | Default                                                                                                                                                        |
| ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Connection |                                                                                                                                                                                        |                                                                                                                                                                |
| Type       | Specifies to the job that it has to update the status of a list of reports.                                                                                                            | reportStatus                                                                                                                                                   |
| Status     | The status to change the reports to. At the moment, only Reimbursed is supported. Only reports in the Approved status can be updated to Reimbursed. All other reports will be ignored. | REIMBURSED                                                                                                                                                     |
| Filters    | The filters to apply to the report list.                                                                                                                                               | <code>{<br /> "type": "reportStatus",<br /> "status": "REIMBURSED",<br /> "filters": {<br /> "reportIDList": "R006AseGxMka,R00bCluvcO4T"<br /> }<br />}</code> |
